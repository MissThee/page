(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79e02df8"],{"63a2":function(e,t,n){"use strict";var i=n("7cf6"),a=n.n(i);a.a},"65a7":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("mavon-editor",{attrs:{editable:e.editorOptions.editable,subfield:e.editorOptions.subfield,defaultOpen:e.editorOptions.defaultOpen,placeholder:e.editorOptions.placeholder,toolbarsFlag:e.editorOptions.toolbarsFlag,shortCut:e.editorOptions.shortCut,toolbars:e.toolbars},model:{value:e.mdText,callback:function(t){e.mdText=t},expression:"mdText"}})],1)},a=[],r={name:"MarkDownArea",props:{fileUrl:{type:String,default:""},editorOptions:{type:Object,default:function(){return{editable:!1,subfield:!1,defaultOpen:"preview",placeholder:"",toolbarsFlag:!1,shortCut:!1}}}},data:function(){return{mdText:"",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0}}},created:function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.fileUrl),t.send(),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(e.mdText=t.responseText)}},methods:{switchEdit:function(){this.editorOptions.editable=!this.editorOptions.editable,this.editorOptions.shortCut=!this.editorOptions.shortCut,this.editorOptions.toolbarsFlag=!this.editorOptions.toolbarsFlag,this.editorOptions.subfield=!this.editorOptions.subfield}}},o=r,l=n("2877"),s=Object(l["a"])(o,i,a,!1,null,"f255aee8",null);t["a"]=s.exports},"7cf6":function(e,t,n){var i=n("f065");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("17980185",i,!0,{sourceMap:!0,shadowMode:!1})},"7f7f":function(e,t,n){var i=n("86cc").f,a=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in a||n("9e1e")&&i(a,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})},ac6a:function(e,t,n){for(var i=n("cadf"),a=n("0d58"),r=n("2aba"),o=n("7726"),l=n("32e9"),s=n("84f2"),d=n("2b4c"),c=d("iterator"),u=d("toStringTag"),p=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=a(f),h=0;h<m.length;h++){var b,w=m[h],v=f[w],g=o[w],y=g&&g.prototype;if(y&&(y[c]||l(y,c,p),y[u]||l(y,u,w),s[w]=p,v))for(b in i)y[b]||r(y,b,i[b],!0)}},d7f2:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{margin:"10px 10%"}},[e.isShowTree?n("div",[n("el-tree",{attrs:{data:e.treeData,"default-expand-all":"","node-key":"id",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(i.label))]),n("span",[a.children||".md"!==a.name.substring(a.name.lastIndexOf("."))?e._e():n("el-button",{attrs:{type:"text",plain:"",size:"mini"},on:{click:function(){e.previewHandler(a)}}},[e._v("\n          预览\n        ")]),a.children?e._e():n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){e.openWindowHandler(a.html_url)}}},[e._v("\n          前往\n        ")])],1)])}}],null,!1,3671849078)})],1):n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{staticStyle:{color:"#555",cursor:"default"},attrs:{type:"info",disabled:"",size:"mini",plain:""},on:{click:function(t){e.isShowTree=!0}}},[e._v("当前文档："+e._s(e.fileName))]),n("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.isShowTree=!0}}},[e._v("返回")]),n("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.switchEdit}},[e._v("编辑/预览")]),n("mark-down-area",{ref:"md",attrs:{"file-url":e.fileUrl}})],1)])},a=[],r=(n("7f7f"),n("ac6a"),n("65a7")),o=n("b775"),l=n("403a"),s={getFileFromGithub:function(e){return Object(o["a"])({method:"get",url:e.url})}},d={name:"MarkdownDoc",components:{MarkDownArea:r["a"]},data:function(){return{isShowTree:!0,fileName:"",fileUrl:"",defaultProps:{children:"children",label:"name"},treeData:[]}},created:function(){this.requestTreeData(l["a"].GITHUB_API_HOST+"/repos/"+l["a"].USER+"/"+l["a"].REPOSITORY+"/contents"+l["a"].DOC_ROOT,this.treeData)},methods:{requestTreeData:function(e,t){var n=this;s.getFileFromGithub({url:void 0===e?"":e}).then((function(e){var i=e.data;i.forEach((function(e){var i=e;"dir"===e.type&&(i.children=[],n.requestTreeData(e.url,i.children)),t.push(i)}))}))},previewHandler:function(e){e.children||".md"===e.name.substring(e.name.lastIndexOf("."))&&(this.isShowTree=!1,this.fileName=e.path,this.fileUrl=e.download_url)},openWindowHandler:function(e){window.open(e)},switchEdit:function(){this.$refs.md.switchEdit()}}},c=d,u=(n("63a2"),n("2877")),p=Object(u["a"])(c,i,a,!1,null,"466453e6",null);t["default"]=p.exports},f065:function(e,t,n){t=e.exports=n("24fb")(!0),t.push([e.i,".custom-tree-node[data-v-466453e6]{flex:1;display:flex;align-items:center;justify-content:space-between;font-size:14px;padding-right:8px}","",{version:3,sources:["H:/WORKWORK_TEST/page/src/views/content/md/src/views/content/md/MarkdownDoc.vue"],names:[],mappings:"AAkGA,mCACA,MAAA,CACA,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,cAAA,CACA,iBACA",file:"MarkdownDoc.vue?vue&type=style&index=0&id=466453e6&scoped=true&lang=css&",sourcesContent:['<template>\n  <div style="margin:10px 10%">\n    <div v-if="isShowTree">\n      <el-tree :data="treeData" default-expand-all node-key="id" :props="defaultProps">\n        <span class="custom-tree-node" slot-scope="{ node, data }">\n        <span>{{ node.label }}</span>\n        <span>\n          <el-button\n            v-if="!data.children&&data.name.substring(data.name.lastIndexOf(\'.\')) === \'.md\'"\n            type="text"\n            plain\n            size="mini"\n            @click="() => {\n                previewHandler(data);\n            }">\n            预览\n          </el-button>\n          <el-button\n            v-if="!data.children"\n            type="text"\n            size="mini"\n            @click="() => {\n               openWindowHandler(data.html_url);\n            }">\n            前往\n          </el-button>\n\n        </span>\n      </span>\n      </el-tree>\n    </div>\n    <div style="text-align: center" v-else>\n      <el-button type="info" disabled size="mini" plain @click="isShowTree=true" style="color:#555;cursor: default">当前文档：{{fileName}}</el-button>\n      <el-button type="primary" size="mini" plain @click="isShowTree=true">返回</el-button>\n      <el-button type="primary" size="mini" plain @click="switchEdit">编辑/预览</el-button>\n      <mark-down-area ref="md" :file-url="fileUrl"></mark-down-area>\n    </div>\n  </div>\n</template>\n<script>\n  import MarkDownArea from \'src/views/common/MarkDownArea\';\n  import MdApi from \'src/api/md-api\';\n  import Global from \'src/utils/global\';\n\n  export default {\n    name: \'MarkdownDoc\',\n    components: {\n      MarkDownArea\n    },\n    data() {\n      return {\n        isShowTree: true,\n        fileName: \'\',\n        fileUrl: \'\',\n        defaultProps: {\n          children: \'children\',\n          label: \'name\'\n        },\n        treeData: [],\n      };\n    },\n    created() {\n      this.requestTreeData(Global.GITHUB_API_HOST + \'/repos/\' + Global.USER + \'/\' + Global.REPOSITORY + \'/contents\' + Global.DOC_ROOT, this.treeData);\n    },\n    methods: {\n      requestTreeData(url, treeData) {\n        MdApi.getFileFromGithub({ url: url === undefined ? \'\' : url })\n          .then(({ data }) => {\n            data.forEach((item) => {\n              let node = item;\n              if (item.type === \'dir\') {\n                node.children = [];\n                this.requestTreeData(item.url, node.children);\n              }\n              treeData.push(node);\n            });\n          });\n      },\n      previewHandler(node) {\n        if (!node.children) {\n          if (node.name.substring(node.name.lastIndexOf(\'.\')) === \'.md\') {\n            this.isShowTree = false;\n            this.fileName = node.path;\n            this.fileUrl = node.download_url;\n          }\n        }\n      },\n      openWindowHandler(url){\n        window.open(url)\n      },\n      switchEdit() {\n        this.$refs.md.switchEdit();\n      }\n    }\n  };\n<\/script>\n\n<style scoped>\n  .custom-tree-node {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 14px;\n    padding-right: 8px;\n  }\n</style>\n']}])}}]);